# Advent of Code 2025 Setup - Development Conversation Log

This document captures the complete conversation and decisions made during the setup of the Advent of Code 2025 environment.

## Overview

Created a comprehensive multi-language setup for Advent of Code 2025 with three language options: Zig, C#, and Go. The setup includes automated puzzle fetching, test generation, and development workflow optimizations.

## Initial Requirements

- Analyze existing solutions from 2021-2024
- Prepare setup for 2025
- Support three languages: Zig, C#, and Go (with Dingo initially, later changed to Lo)
- Include boilerplate and test templates

## Key Decisions & Evolution

### Language Choices

1. **Zig 0.15.2** - Systems programming language
   - Manual memory management with allocators
   - Comptime execution
   - Build system configuration challenges resolved

2. **C# .NET 10.0 LTS** (upgraded from initial .NET 9.0)
   - Latest LTS release (November 11, 2025)
   - 3 years of support (until November 14, 2028)
   - C# 14 features
   - Modern top-level statements

3. **Go 1.23 with Lo** (changed from Dingo)
   - Initially planned: Dingo (transpiler to Go)
   - **Changed to:** Lo (samber/lo) - Lodash-style functional library
   - Reason: Dingo is a transpiler, not a runtime library; Lo is more practical

### Pattern Evolution from Previous Years

**2021 (C#):** Monolithic console apps  
**2022 (Rust):** Standalone Cargo projects per day  
**2023-2024 (Rust):** Workspace with comprehensive tooling  

**2025 follows 2024 refined pattern:**
- Single `input.txt` per day (not separate input1/input2)
- `task.txt` for problem descriptions
- Embedded/compiled input for performance
- Template-based day creation

### Directory Structure

```
2025/
├── .aoc-fetch.sh           # Main fetch utility
├── .aoc-update-task.sh     # Part 2 update helper
├── .gitignore              # Security and build artifacts
├── AOC_FETCH_SETUP.md      # Complete setup guide
├── README.md               # Main overview
├── zig/
│   ├── build.zig           # Workspace configuration
│   ├── build.zig.zon       # Package manifest (Zig 0.15 format)
│   ├── create-day.sh       # Day creation script
│   ├── template/           # Boilerplate
│   └── README.md
├── csharp/
│   ├── AoC2025.sln         # Solution file
│   ├── Directory.Build.props  # Shared .NET 10.0 config
│   ├── create-day.sh
│   ├── template/
│   └── README.md
└── go/
    ├── go.mod
    ├── create-day.sh
    ├── template/
    └── README.md
```

## Automation & Workflow Features

### Puzzle Fetching (Policy-Compliant)

**Automation Guidelines Followed:**
- Rate limiting: 3 seconds between requests (configurable)
- Caching: All responses cached locally
- User-Agent: Includes repository and contact info
- Session-based authentication
- Respects AoC server load

**Implementation:**
- `.aoc-fetch.sh` - Main fetch script
- Shared cache at `~/.aoc-cache/2025/`
- Separate Part 1 and Part 2 task handling

**Key Insight:** Part 2 only becomes available AFTER Part 1 is correctly solved
- Initially fetches Part 1 task only
- Separate cache files: `day5_task_part1.html` and `day5_task_part2.html`
- Helper script `.aoc-update-task.sh` to fetch Part 2 after solving Part 1

### Shared Caching Design

**Problem Solved:** Avoid duplicate requests when working across multiple languages

**Solution:**
- Single cache location: `~/.aoc-cache/2025/`
- Create-day scripts check cache BEFORE fetching
- Workflow: Fetch once in Zig → instant cache hit in Go/C#

**Cache Structure:**
```
~/.aoc-cache/2025/
├── day1_input.txt
├── day1_task_part1.html
├── day1_task_part2.html    # Only after Part 1 solved
├── day5_input.txt
├── day5_task_part1.html
└── ...
```

**Benefit:** Only ONE network request per day per year, total

## Technical Challenges & Solutions

### Zig 0.15.2 API Changes

**Problem:** Build configuration incompatible with Zig 0.15

**Issues encountered:**
1. `build.zig.zon` syntax changed - `.name` now uses enum literal (`.aoc2025` not `"aoc2025"`)
2. `fingerprint` field validation
3. `root_source_file` moved to `root_module` with `createModule()`
4. Directory handle requires `var` not `const` for `.close()`

**Solutions:**
```zig
// build.zig.zon
.{
    .name = .aoc2025,  // enum literal, not string
    .fingerprint = 0x52176dd5504aff6d,  // generated by toolchain
}

// build.zig
const exe = b.addExecutable(.{
    .name = "...",
    .root_module = b.createModule(.{  // New in 0.15
        .root_source_file = b.path("..."),
        .target = target,
        .optimize = optimize,
    }),
});
```

### Go Functional Library Selection

**Initial Plan:** Dingo (github.com/MadAppGang/dingo)

**Problem Discovered:** Dingo is a transpiler to Go, not a runtime library
- Requires `.dingo` source files
- Transpiles to idiomatic Go code
- Not suitable for direct use as a Go library

**Solution:** Switched to Lo (samber/lo v1.47.0)
- Popular Lodash-style functional library
- Direct Go library with generics support
- Functions: Filter, Map, Reduce, Chunk, Uniq, GroupBy, etc.
- Battle-tested and widely used

### .NET Version Selection

**Initial:** .NET 9.0

**User Question:** Why not .NET 10?

**Research Found:**
- .NET 10 released November 11, 2025
- LTS (Long-Term Support) release
- 3 years support vs .NET 9's 18 months
- C# 14 features
- Better choice for new projects

**Decision:** Upgraded to .NET 10.0

## Security & Privacy

### .gitignore Configuration

**Secrets Protected:**
- `.aoc-session` - Session tokens (root and 2025/)
- `session.txt`, `cookie.txt` - Credential files
- `.env` files

**Build Artifacts Ignored:**
- Zig: `.zig-cache/`, `zig-out/`, `*.o`, `*.a`, `*.so`
- C#: `bin/`, `obj/`, `Debug/`, `Release/`, `.vs/`, NuGet packages
- Go: `*.exe`, `*.out`, `*.test`, compiled binaries

**IDE/OS Files:**
- VSCode, JetBrains, Vim, Emacs
- macOS (`.DS_Store`), Windows (`Thumbs.db`), Linux

**Note:** Input and task files are NOT ignored by default (users can uncomment if they want privacy)

### User-Agent Configuration

**Configured with:**
- Repository: `github.com/hamburger1984/advent-of-code`
- Contact: `hamburger1984@gmail.com`

Following Reddit guidelines to include contact information in User-Agent header.

## Workflow Design

### Standard Workflow (Part 1 → Part 2)

1. **Create Day:**
   ```bash
   cd zig
   ./create-day.sh 5 --fetch  # Fetches input + Part 1 task
   ```

2. **Solve Part 1:**
   - Implement solution
   - Test and run
   - Submit answer on adventofcode.com

3. **Get Part 2:**
   ```bash
   cd ..
   ./.aoc-update-task.sh 5 zig  # Fetches Part 2 task
   ```

4. **Solve Part 2:**
   - Implement solution
   - Submit answer

5. **Multi-language:**
   ```bash
   cd go
   ./create-day.sh 5 --fetch      # Instant - uses cache!
   cd ..
   ./.aoc-update-task.sh 5 go     # Instant - Part 2 cached!
   ```

### Manual Workflow (without auto-fetch)

```bash
./create-day.sh 5
# Manually add input.txt and task.txt
# Proceed with solving
```

## Future Enhancement: TDD Workflow (Phase 1 - Planned)

### Motivation

Current workflow requires manual test setup. AoC problems include example inputs and expected outputs in the task description. These can be automatically extracted and used to generate unit tests.

### Example from 2024 Day 1

**Task contains:**
```
For example:

3   4
4   3
2   5
1   3
3   9
3   3

...calculation explanation...

...a total distance of 11!
```

**Auto-generated test:**
```go
func TestPart1(t *testing.T) {
    input := `3   4
4   3
2   5
1   3
3   9
3   3`
    result := part1(input)
    expected := "11"
    if result != expected {
        t.Errorf("part1() = %v, want %v", result, expected)
    }
}
```

### Proposed Implementation

1. **`.aoc-parse-examples.sh`**
   - Parse task.txt to extract example inputs and answers
   - Output JSON: `{"examples": [{"input": "...", "answer": "11"}]}`
   - Handle multiple examples per part
   - Detect answer patterns: "total of X", "score is Y", etc.

2. **Update `create-day.sh` scripts**
   - After fetching task, run parser
   - Auto-populate test files with extracted examples
   - Replace placeholder tests with real data

3. **Watch mode helpers**
   - `watch.sh` for each language
   - C#: `dotnet watch test`
   - Go: `FS_WATCH=true go test -v`
   - Zig: `entr` or similar for file watching

4. **Enhanced `.aoc-update-task.sh`**
   - When fetching Part 2, re-run example parser
   - Update existing tests with Part 2 examples
   - Maintain Part 1 tests

### Expected TDD Workflow

```bash
# Day starts
./create-day.sh 5 --fetch
# → Input fetched
# → Part 1 task fetched
# → Examples parsed
# → Tests auto-generated with real examples!

cd day-5

# Start TDD mode
../watch.sh
# → Auto-runs tests on file save
# → Red → Green → Refactor cycle

# Code until tests pass
# Submit Part 1 answer manually

# Get Part 2
cd .. && ./.aoc-update-task.sh 5 zig
# → Part 2 task fetched
# → Part 2 examples parsed
# → Tests updated automatically!

cd day-5 && ../watch.sh
# → Continue TDD for Part 2
```

### Feasibility Analysis

**Phase 1: TDD Workflow** (Implementing Now)
- ⭐⭐⭐⭐⭐ Extract sample inputs/answers: 95% feasible
- ⭐⭐⭐⭐ Auto-generate tests: 85% feasible
- Some edge cases (multiple examples, complex formats)

**Phase 2: Progress Tracking** (Future)
- ⭐⭐⭐ Auto-update README table: 90% feasible
- Detect completion, update status symbols

**Phase 3: Submission Automation** (Probably Skip)
- ⭐⭐ Auto-submit answers: 60% feasible
- Complex, risky with rate limits
- Manual submission is acceptable

## Documentation Structure

### Main Documentation

1. **`2025/README.md`**
   - Overview of three languages
   - Quick start guide
   - Progress tracking table
   - Links to language-specific READMEs

2. **`2025/AOC_FETCH_SETUP.md`**
   - Complete setup guide for session token
   - How auto-fetch works
   - Shared caching explanation
   - Part 1/Part 2 workflow
   - Troubleshooting section
   - Responsible use guidelines

3. **Language READMEs** (zig/, csharp/, go/)
   - Installation requirements
   - Creating new days
   - Running tests
   - Building and running solutions
   - Language-specific tips

## Git History

### Commits Created

1. **Initial Setup (commit 4d2df84)**
   ```
   Prepare Advent of Code 2025 setup with Zig, C#, and Go
   
   46 files changed, 1895 insertions(+)
   ```
   
   - Created three language environments
   - Implemented automated fetching
   - Added documentation
   - Security via .gitignore
   - Example day-1 directories

2. **Cleanup (commit 92978aa)**
   ```
   Remove example day-1 directories
   
   17 files changed, 199 deletions(-)
   ```
   
   - Removed day-1 examples from all languages
   - Clean slate for December start

## References & Resources

### Advent of Code Policies
- [Automation Guidelines Reddit](https://www.reddit.com/r/adventofcode/comments/z9dhtd/please_include_your_contact_info_in_the_useragent/)
- [Monday Morning Haskell - Fetching Puzzle Input](https://mmhaskell.com/blog/2023/1/30/advent-of-code-fetching-puzzle-input-using-the-api)
- [advent-of-code-data](https://github.com/wimglenn/advent-of-code-data)

### Technology Documentation
- [Zig 0.15.1 Release Notes](https://ziglang.org/download/0.15.1/release-notes.html)
- [.NET 10 Official Release](https://www.infoq.com/news/2025/11/dotnet-10-release/)
- [Download .NET 10.0](https://dotnet.microsoft.com/en-us/download/dotnet/10.0)
- [samber/lo GitHub](https://github.com/samber/lo)
- [BooleanCat/go-functional](https://github.com/BooleanCat/go-functional)

### AoC Task Structure
- [Day 1 - Advent of Code 2024](https://adventofcode.com/2024/day/1)
- [Day 2 - Advent of Code 2024](https://adventofcode.com/2024/day/2)

## Lessons Learned

1. **API changes happen** - Zig 0.15 had significant breaking changes
2. **Research before committing** - Dingo vs Lo library choice
3. **LTS matters** - .NET 10 LTS better than .NET 9 standard
4. **Caching is critical** - Shared cache prevents duplicate requests
5. **Part 1/Part 2 workflow** - Must be handled separately per AoC design
6. **User-Agent matters** - Community expects proper attribution
7. **Security first** - Never commit session tokens

## Status

**Current State:** ✅ Complete and ready for December 2025

**Setup includes:**
- ✅ Three language environments configured
- ✅ Automated fetching with caching
- ✅ Part 1/Part 2 workflow support
- ✅ Comprehensive documentation
- ✅ Security via .gitignore
- ✅ Example templates

**Next Phase:** Implementing TDD workflow with auto-generated tests

## Quick Reference Commands

### Setup Session Token
```bash
echo 'your-session-token' > ~/.aoc-session
chmod 600 ~/.aoc-session
```

### Create New Day
```bash
cd 2025/zig    # or csharp, or go
./create-day.sh 1 --fetch
```

### Update to Part 2
```bash
cd 2025
./.aoc-update-task.sh 1 zig
```

### Manual Fetch
```bash
cd 2025
./.aoc-fetch.sh 1 input    # Just input
./.aoc-fetch.sh 1 task     # Part 1 task
./.aoc-fetch.sh 1 task2    # Part 2 task
./.aoc-fetch.sh 1 both     # Input + Part 1 task
```

## End of Conversation Log

Last updated: 2025-11-26
Repository: https://github.com/hamburger1984/advent-of-code
Prepared by: Claude (Anthropic AI Assistant)
For: Andreas (hamburger1984@gmail.com)
